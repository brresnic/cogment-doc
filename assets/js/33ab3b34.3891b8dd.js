"use strict";(self.webpackChunkcogment_doc=self.webpackChunkcogment_doc||[]).push([[447],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,h=d["".concat(s,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8453:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return c},default:function(){return d}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=["components"],l={},s="Step 1: Create a new Trial",p={unversionedId:"cogment/tutorial/bootstrap-and-data-structures",id:"cogment/tutorial/bootstrap-and-data-structures",title:"Step 1: Create a new Trial",description:"Install Cogment",source:"@site/docs/cogment/tutorial/1-bootstrap-and-data-structures.md",sourceDirName:"cogment/tutorial",slug:"/cogment/tutorial/bootstrap-and-data-structures",permalink:"/docs/cogment/tutorial/bootstrap-and-data-structures",tags:[],version:"current",lastUpdatedAt:1645720139,formattedLastUpdatedAt:"2/24/2022",sidebarPosition:1,frontMatter:{},sidebar:"docSidebar",previous:{title:"Tutorial",permalink:"/docs/cogment/tutorial/"},next:{title:"Step 2: Implement a first actor and environment",permalink:"/docs/cogment/tutorial/random-player"}},c=[{value:"Install Cogment",id:"install-cogment",children:[],level:2},{value:"Bootstrap the app",id:"bootstrap-the-app",children:[],level:2},{value:"Building and running the app",id:"building-and-running-the-app",children:[],level:2},{value:"Define our data structures",id:"define-our-data-structures",children:[{value:"Action Space",id:"action-space",children:[],level:3},{value:"Observation Space",id:"observation-space",children:[],level:3}],level:2}],u={toc:c};function d(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"step-1-create-a-new-trial"},"Step 1: Create a new Trial"),(0,o.kt)("h2",{id:"install-cogment"},"Install Cogment"),(0,o.kt)("p",null,"To follow this tutorial you'll need a working installation of ",(0,o.kt)("strong",{parentName:"p"},"Cogment"),". If you haven't done so already, follow our ",(0,o.kt)("a",{parentName:"p",href:"/docs/introduction/installation"},"installation instructions"),"."),(0,o.kt)("h2",{id:"bootstrap-the-app"},"Bootstrap the app"),(0,o.kt)("p",null,"The Cogment command line interface (CLI) includes a simple tool to generate the base files and folder structures for a Cogment app. The first thing we'll do is use it to create an app with 2 AIs able to play games of RPS."),(0,o.kt)("p",null,"Using Cogment's terminology, we will create 2 actors sharing a single implementation picking a random move for each round. We will develop a ",(0,o.kt)("strong",{parentName:"p"},"service actor")," implementation which is well suited for AIs rather than a ",(0,o.kt)("strong",{parentName:"p"},"client actor")," implementation, which would be required for an interactive actor; for exemple, an actor controlled by a Human player. In the ",(0,o.kt)("a",{parentName:"p",href:"/docs/cogment/tutorial/human-player"},"step 5")," we will create such implementation."),(0,o.kt)("p",null,"Run the following to bootstrap the app in a ",(0,o.kt)("inlineCode",{parentName:"p"},"rps")," directory:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ cogment init rps\n\nEnter how many actor classes should be created: 1\n[class 1] Enter the name of the class: player\n[class #1 'player'] Enter the number of service implementations that should be created (empty for 1): 1\n[class #1 'player' > service impl. #1] Enter the name of the implementation: random_agent\n[class #1 'player' > service impl. #1 'random_agent'] Enter the number of actor instances using this implementation (empty for 1): 2\n[class #1 'player'] Should a client implementation be created (Y or N, empty for Y): N\nShould a web-client be created (Y or N, empty for Y): N\n\n$ cd rps\n")),(0,o.kt)("p",null,"To summarize, for this 2 players game, we created:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"1 actor class, ",(0,o.kt)("inlineCode",{parentName:"li"},"player"),", because RPS is a symmetric game, both players have the same role within the game,"),(0,o.kt)("li",{parentName:"ul"},"1 actor implementation for this class, ",(0,o.kt)("inlineCode",{parentName:"li"},"random_agent"),", because at the moment we only want to implement one way of playing,"),(0,o.kt)("li",{parentName:"ul"},"2 actor instances, because the game has 2 players.")),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"\u2139\ufe0f For the remainder of this tutorial, unless otherwise mentioned, it is assumed that all operations are run in the ",(0,o.kt)("inlineCode",{parentName:"p"},"rps")," directory.")),(0,o.kt)("h2",{id:"building-and-running-the-app"},"Building and running the app"),(0,o.kt)("p",null,"We can now check that everything works as expected."),(0,o.kt)("p",null,"First, we will need to run the build phase. The docker files rely on cogment.yaml, and data.proto to be in the respective build directories, the shortcut for copying these files to the build directories is ",(0,o.kt)("inlineCode",{parentName:"p"},"cogment run copy")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ cogment run copy\n$ cogment run build\n")),(0,o.kt)("p",null,"Run the following to start all the services of the Cogment app as docker containers: the ",(0,o.kt)("inlineCode",{parentName:"p"},"orchestrator"),", the ",(0,o.kt)("inlineCode",{parentName:"p"},"environment")," and our ",(0,o.kt)("inlineCode",{parentName:"p"},"random_agent"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ cogment run start\n")),(0,o.kt)("p",null,"In another terminal, run the following to start a client for this Cogment app, this will connect to the running services to start a trial, let it run for a few seconds and then terminate it."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-console"},"$ cogment run client\nExecuting docker-compose run --rm client in .\nCreating rps_client_run ... done\nClient up and running.\nTrial 'b8251a1a-fad0-43b9-a1cc-00dcbebbfaa7' starts\nTrial 'b8251a1a-fad0-43b9-a1cc-00dcbebbfaa7' terminating\n")),(0,o.kt)("p",null,"This should also generate some logs in the first terminal where the app services are running. You can now terminate the services using ",(0,o.kt)("inlineCode",{parentName:"p"},"ctrl+C"),"."),(0,o.kt)("p",null,"At this point we have generated a working but empty Cogment app and we checked that it could build and run. We are now ready to start the actual implementation!"),(0,o.kt)("h2",{id:"define-our-data-structures"},"Define our data structures"),(0,o.kt)("p",null,"Cogment uses ",(0,o.kt)("a",{parentName:"p",href:"https://developers.google.com/protocol-buffers/"},"Protocol Buffers")," to define data structures. The initial definitions are located in the ",(0,o.kt)("inlineCode",{parentName:"p"},"data.proto")," and look like that."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-proto"},'syntax = "proto3";\n\npackage rps;\n\nmessage EnvConfig {\n}\n\nmessage TrialConfig {\n    EnvConfig env_config = 1;\n}\n\nmessage Observation {}\nmessage PlayerAction {}\n')),(0,o.kt)("p",null,"Note that a file named ",(0,o.kt)("inlineCode",{parentName:"p"},"cogment.yaml")," was also created in the ",(0,o.kt)("inlineCode",{parentName:"p"},"rps")," directory by the boostrap process.\nThis file is the main configuration for your Cogment app. In it, you will see a reference to:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"import:\n    proto:\n        - data.proto\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"EnvConfig")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"TrialConfig")," will be discussed in the coming steps. For now we'll focus on defining the ",(0,o.kt)("strong",{parentName:"p"},"Action Space and Observation Space")," for our RPS app."),(0,o.kt)("h3",{id:"action-space"},"Action Space"),(0,o.kt)("p",null,"Let's start by filling up ",(0,o.kt)("inlineCode",{parentName:"p"},"PlayerAction")," which defines what each player can do at each step of the game. In the case of RPS, players chose one move among the three alternatives giving their name to the game: ",(0,o.kt)("em",{parentName:"p"},'"Rock"'),", ",(0,o.kt)("em",{parentName:"p"},'"Paper"')," or ",(0,o.kt)("em",{parentName:"p"},'"Scissors"'),"."),(0,o.kt)("p",null,"To do that we will use an ",(0,o.kt)("inlineCode",{parentName:"p"},"enum")," called ",(0,o.kt)("inlineCode",{parentName:"p"},"Move"),","),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-proto"},"enum Move {\n  ROCK = 0;\n  PAPER = 1;\n  SCISSORS = 2;\n}\n")),(0,o.kt)("p",null,"and use that type in ",(0,o.kt)("inlineCode",{parentName:"p"},"PlayerAction"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-proto"},"message PlayerAction {\n  Move move = 1;\n}\n")),(0,o.kt)("p",null,"Modify the ",(0,o.kt)("inlineCode",{parentName:"p"},"data.proto")," file to include the above additions."),(0,o.kt)("h3",{id:"observation-space"},"Observation Space"),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"Observation")," structure defines what the actors perceive from the environment. It is an input they use to choose which action to take."),(0,o.kt)("p",null,"In the context of RPS, the environment is limited to the two players and what they played. We represent this information in a data structure called ",(0,o.kt)("inlineCode",{parentName:"p"},"PlayerState")," using two properties."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-proto"},"message PlayerState {\n  Move last_move = 1; // Last move played\n  bool won_last = 2;  // Did the player win the last round\n}\n")),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"Observation")," structure itself defines the observed players from the point of view of each player."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-proto"},"message Observation {\n  PlayerState me = 1;\n  PlayerState them = 2;\n}\n")),(0,o.kt)("p",null,"Edit the ",(0,o.kt)("inlineCode",{parentName:"p"},"data.proto")," file to include the above additions. This file is used during the code generation phase to make the defined data structures available to the different services."),(0,o.kt)("p",null,"To check that everything is working ",(0,o.kt)("a",{parentName:"p",href:"#building-and-running-the-app"},"build and run")," the application. Nothing should be different at this stage."),(0,o.kt)("p",null,"This concludes the step 1 of the tutorial: you have bootstrapped a Cogment project, implemented the data structures defining the action and observation spaces, started your app and ran a trial."),(0,o.kt)("p",null,"Let\u2019s move on to actually implementing our services in ",(0,o.kt)("a",{parentName:"p",href:"/docs/cogment/tutorial/random-player"},"step 2"),"."))}d.isMDXComponent=!0}}]);